class Apfco{static updateQueryString(e,t,i){i||(i=window.location.href);var l,n=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");if(n.test(i))return null!=t?i.replace(n,"$1"+e+"="+t+"$2$3"):(l=i.split("#"),i=l[0].replace(n,"$1$3").replace(/(&|\?)$/,""),void 0!==l[1]&&null!==l[1]&&(i+="#"+l[1]),i);if(null!=t){var s=-1!==i.indexOf("?")?"&":"?";return l=i.split("#"),i=l[0]+s+e+"="+t,void 0!==l[1]&&null!==l[1]&&(i+="#"+l[1]),i}return i}static stripQueryStringAndHashFromUrl(e){return e.split(/[?#]/)[0]}static sleep(e){return new Promise((function(t){setTimeout(t,e)}))}static replaceAll(e,t,i){e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");return e.replace(new RegExp(t,"g"),i)}}class IFormFile{el;elTable;elType;elMaximum;elProgress;elRequired;constructor(e){let t=this;this.el=$(e),this.elTable=document.getElementById(e.id+"Table"),this.elType=document.getElementById(e.id).getAttribute("filetype"),this.elMaximum=document.getElementById(e.id).getAttribute("maximum"),this.elProgress=document.getElementById(e.id+"Progress"),this.elRequired=null!=$(e).attr("required"),$(e).change((function(e){if(t.elTable.getElementsByTagName("tbody")[0].querySelectorAll(".table-item").length<t.elMaximum){var i=document.getElementById(e.target.id).files[0],l=new FormData;l.append("file",i),l.append("type",t.elType),t.Action_uploadfile(l)}})).click((function(){$(this).val(""),$(this.elProgress).css("width","0%")}));for(let e=0;e<$(".customfile-action").length;e++){let i=$(".customfile-action")[e].id;$("#"+i).on("click",(function(l){t.Action_deletefile(e+1,i)}))}t.HTML_updatebutton()}Action_uploadfile(e){let t=this,i=this.el,l=this.elProgress;i.prop("disabled",!0);var n=$('input[name="__RequestVerificationToken"]').val();e.append("__RequestVerificationToken",n),$.ajax({xhr:function(){var e=new XMLHttpRequest;return $(l).addClass("progress-bar-animated"),e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total*100/1.5;$(l).css("width",t+"%")}}),!1),e.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;$(l).css("width",t+"%")}}),!1),e},type:"POST",url:GLOBALROOTURL+"/ClientRequest/SaveFileUpload",data:e,processData:!1,contentType:!1,success:function(n){e.append("uniqueid",n),t.HTML_addfiletotable(e),$(l).css("width","100%"),window.setTimeout((function(){$(l).css("width","0%"),$(l).removeClass("progress-bar-animated"),i.prop("disabled",!1),t.HTML_updatebutton()}),500)},error:function(e,t,n){$(l).css("width","100%"),window.setTimeout((function(){$(l).css("width","0%"),$(l).removeClass("progress-bar-animated"),i.prop("disabled",!1),alert(e.responseText)}),500)}})}Action_deletefile(e,t){let i=this,l=this.elTable.getElementsByTagName("tbody")[0];(l.deleteRow(e-1),0===l.rows.length)?l.insertRow(l.rows.length).outerHTML='<tr class="table-row"><th scope= "row"></th ><td></td><td><button type="button" class="customfile-action-none" disabled ><i class="fa fa-trash-alt"></i></button></td></tr >':i.HTML_updaterows();var n=new FormData;n.append("id",t);var s=$('input[name="__RequestVerificationToken"]').val();n.append("__RequestVerificationToken",s),$.ajax({type:"POST",url:GLOBALROOTURL+"/ClientRequest/DeleteFileUpload",contentType:"application/json; charset=utf-8",data:n,processData:!1,contentType:!1,success:function(){i.HTML_updatebutton()},error:function(e,t,i){alert(i)}})}HTML_addfiletotable(e){let t=this;var i=this.elTable.getElementsByTagName("tbody")[0];""===i.rows[0].cells[1].innerHTML.trim()&&i.deleteRow(0),(i=this.elTable.getElementsByTagName("tbody")[0]).insertRow(i.rows.length).outerHTML='<tr class="table-row table-item"><th scope="row">'+i.rows.length+"</th ><td>"+e.get("file").name+'</td><td><button type="button" class="customfile-action" id="'+e.get("uniqueid")+'"><i class="fa fa-trash-alt"></i></button></td></tr >';let l=i.rows.length,n=e.get("uniqueid");$("#"+n).on("click",(function(e){t.Action_deletefile(l,n)}))}HTML_updaterows(){let e=this;var t=this.elTable.getElementsByTagName("tbody")[0];for(let i=0;i<t.rows.length;i++){t.rows[i].cells[0].innerHTML=i+1;let l=t.rows[i].cells[2].firstChild.getAttribute("id").toString();t.rows[i].cells[2].innerHTML='<button type="button" class="customfile-action" id="'+l+'"><i class="fa fa-trash-alt"></i></button>',$("#"+l).off("click"),$("#"+l).on("click",(function(t){e.Action_deletefile(i+1,l)}))}}HTML_updatebutton(){let e=this;var t=e.elTable.getElementsByTagName("tbody")[0].querySelectorAll(".table-item").length;t>=e.elMaximum?e.el.prop("disabled",!0):e.el.prop("disabled",!1),this.elRequired&&(t>0?e.el.prop("required",!1):e.el.prop("required",!0))}}let IFormFileList=[];$((function(){let e=document.getElementsByClassName("IFormFile");for(let t=0;t<e.length;t++)IFormFileList.push(new IFormFile(e.item(t)))}));class ViewHomeEntryForm{constructor(e){this.target=e,console.log("GLOBALROOTURL: "+GLOBALROOTURL),console.log("View initialized")}async sleepTest(){console.log("Sleep test A"),await Apfco.sleep(2e3),console.log("Sleep test B"),await Apfco.sleep(2e3),console.log("Sleep test C")}}let ViewHomeEntryFormList=[];$((function(){if(document.body.classList.contains("cHome")&&document.body.classList.contains("aEntryForm")){let e=document.getElementsByClassName("viewWrapper");for(let t=0;t<e.length;t++)ViewHomeEntryFormList.push(new ViewHomeEntryForm(e.item(t)))}}));class ViewSharedLayoutPrimary{target;constructor(e){this.target=e,this.disableFormButtonsOnSubmit(),this.wrapTrademarkSymbolsWithSuperscriptTag(),console.log("LayoutPrimary initialized")}disableFormButtonsOnSubmit(){$(this.target).find("form").each((function(){$(this).submit((function(e){$(this).find(":input[type=submit]").each((function(){$(this).attr("apfDontDisableOnSubmit")||$(this).prop("disabled",!0)}))}))})),$(this.target).find("form").each((function(){let e=this;$(this).find(":input[type=submit]").each((function(){$(this).attr("apfDontDisableOnSubmit")||$(this).click((function(t){$("<input>").attr({type:"hidden",name:$(this).attr("name"),value:$(this).val()}).insertBefore($(e).children().first())}))}))}))}wrapTrademarkSymbolsWithSuperscriptTag(){let e=/[\xAE]/;$("body :not(script,sup)").contents().filter((function(){return 3===this.nodeType&&e.test(this.nodeValue)})).replaceWith((function(){return this.nodeValue.replace(e,"<sup>$&</sup>")})),$("body :not(script,sup)").contents().filter((function(){return 3===this.nodeType})).replaceWith((function(){return this.nodeValue.replace(/[™®©]/g,"<sup>$&</sup>")}))}}let ViewSharedLayoutPrimaryList=[];$((function(){let e=document.getElementsByClassName("LayoutPrimary");for(let t=0;t<e.length;t++)ViewSharedLayoutPrimaryList.push(new ViewSharedLayoutPrimary(e.item(t)))}));
//# sourceMappingURL=site.min.js.map
